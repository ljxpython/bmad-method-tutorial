# 第二部分：环境搭建

## 🎯 本章目标

学完本章后，你将：
- ✅ 安装并配置好BMAD-METHOD开发环境
- ✅ 创建第一个BMAD项目
- ✅ 配置Web UI代理（Gemini/Claude/ChatGPT）
- ✅ 验证所有组件正常工作

## 📋 前置要求

### 系统要求
- **操作系统**: Windows 10+, macOS 10.15+, 或 Linux
- **Node.js**: v20.0.0 或更高版本
- **内存**: 至少 4GB RAM
- **磁盘空间**: 至少 1GB 可用空间

### 推荐工具
- **代码编辑器**: VS Code, Cursor, 或其他支持AI的IDE
- **命令行工具**: Terminal (macOS/Linux) 或 PowerShell (Windows)
- **版本控制**: Git（可选但推荐）

## 🛠️ 第一步：安装Node.js

### 检查是否已安装
打开命令行，运行：
```bash
node --version
npm --version
```

如果显示版本号且Node.js版本 ≥ v20.0.0，可以跳过安装步骤。

### 安装Node.js
1. 访问 [Node.js官网](https://nodejs.org)
2. 下载 LTS (Long Term Support) 版本
3. 运行安装程序，使用默认设置
4. 重新打开命令行验证安装

**验证安装**：
```bash
# 应该显示 v20.x.x 或更高版本
node --version

# 应该显示对应的npm版本
npm --version
```

## 📁 第二步：创建项目目录

### 创建新项目
```bash
# 创建项目目录
mkdir my-todo-app
cd my-todo-app

# 初始化npm项目
npm init -y
```

### 验证项目结构
运行后你应该看到：
```
my-todo-app/
├── package.json
└── (其他可能的文件)
```

## ⚡ 第三步：安装BMAD-METHOD

### 一键安装（推荐）
```bash
# 安装最新稳定版本
npx bmad-method@stable install
```

**等待安装完成**，这个过程可能需要2-5分钟，取决于网络速度。

### 验证安装成功
安装完成后，你的项目结构应该类似：
```
my-todo-app/
├── .bmad-core/          # BMAD核心文件
│   ├── agents/          # AI代理定义
│   ├── templates/       # 文档模板
│   ├── tasks/           # 任务定义
│   ├── data/           # 配置数据
│   └── dist/           # 打包文件
├── docs/               # 项目文档目录
├── package.json        # 项目配置
├── package-lock.json   # 依赖锁定文件
└── README.md          # 项目说明
```

### 检查关键文件
确认以下文件存在：
```bash
# 检查核心代理文件
ls .bmad-core/agents/

# 应该看到类似输出：
# analyst.md  architect.md  bmad-master.md  bmad-orchestrator.md
# developer.md  pm.md  qa.md  scrum-master.md

# 检查团队打包文件
ls .bmad-core/dist/teams/

# 应该看到：
# team-fullstack.txt
```

## 🌐 第四步：设置Web UI代理

为了体验完整的规划阶段，我们需要在Web UI中设置BMAD代理。

### 选择AI平台
推荐按优先级选择：
1. **Gemini** - 免费，上下文窗口大，适合大型项目
2. **Claude** - 代码理解能力强，适合技术项目
3. **ChatGPT** - 使用广泛，稳定可靠

### 准备团队文件

#### 找到团队文件
```bash
# 查看团队文件内容
cat .bmad-core/dist/teams/team-fullstack.txt
```

你会看到一个很长的文本文件，包含所有代理的定义。

#### 复制文件内容
```bash
# 将内容复制到剪贴板 (macOS)
cat .bmad-core/dist/teams/team-fullstack.txt | pbcopy

# 或者直接打开文件复制内容
```

### 配置Gemini（推荐）

1. **访问Gemini**：打开 [gemini.google.com](https://gemini.google.com)
2. **创建新Gem**：
   - 点击右上角的"Create Gem"
   - 给Gem命名：如"BMAD-METHOD Full Stack Team"
3. **上传指令**：
   - 在"Instructions"框中粘贴团队文件内容
   - 或者作为文档上传team-fullstack.txt文件
4. **设置系统指令**：
   ```
   Your critical operating instructions are attached, do not break character as directed
   ```
5. **保存Gem**

### 配置Claude Projects

1. **访问Claude**：打开 [claude.ai](https://claude.ai)
2. **创建新Project**：
   - 点击"New Project"
   - 命名为"BMAD-METHOD Tutorial"
3. **添加项目指令**：
   - 在Project Instructions中粘贴团队文件内容
   - 添加系统指令：
   ```
   Your critical operating instructions are attached, do not break character as directed
   ```
4. **保存项目**

### 配置ChatGPT（GPT Builder）

1. **访问ChatGPT**：打开 [chat.openai.com](https://chat.openai.com)
2. **创建Custom GPT**：
   - 点击"Explore" → "Create a GPT"
   - 命名为"BMAD-METHOD Assistant"
3. **配置Instructions**：
   ```
   Your critical operating instructions are attached, do not break character as directed
   
   [粘贴团队文件内容]
   ```
4. **发布GPT**（私人使用）

## ✅ 第五步：验证安装

### 测试Web UI代理
在你配置的Web UI中输入：
```
*help
```

你应该看到类似输出：
```
# BMAD Method - Available Agents & Commands

## Core Planning Agents
- *analyst - Market research and business analysis
- *pm - Product management and PRD creation  
- *architect - System architecture and technical design

## Development Agents  
- *sm - Scrum Master for story creation
- *dev - Developer for implementation
- *qa - Quality Assurance and testing

## Special Agents
- *bmad-orchestrator - Get guidance on BMad workflow
- *bmad-master - Advanced project management
```

### 测试Orchestrator
输入：
```
*bmad-orchestrator

请介绍一下BMAD-METHOD的工作流程
```

如果代理能正确响应并解释工作流程，说明配置成功！

### 测试本地环境
回到命令行，测试flattener工具：
```bash
# 测试代码库扁平化工具
npx bmad-method flatten --help
```

应该看到帮助信息，说明工具安装正确。

## 🎨 第六步：可选配置

### 设置技术偏好（推荐）
创建你的技术偏好文件：
```bash
# 打开技术偏好文件
code .bmad-core/data/technical-preferences.md
```

添加你的偏好设置：
```markdown
# 我的技术偏好

## 前端开发
- **框架**: React + TypeScript
- **状态管理**: Zustand
- **样式**: Tailwind CSS
- **构建工具**: Vite

## 后端开发  
- **运行时**: Node.js
- **框架**: Express.js
- **数据库**: SQLite（开发）/ PostgreSQL（生产）
- **ORM**: Prisma

## 代码风格
- **格式化**: Prettier
- **代码检查**: ESLint
- **文件命名**: kebab-case
- **函数命名**: camelCase
```

### 配置Git（推荐）
```bash
# 初始化Git仓库
git init

# 创建.gitignore文件
cat > .gitignore << EOF
node_modules/
.env
.env.local
dist/
build/
*.log
.DS_Store
EOF

# 首次提交
git add .
git commit -m "Initial BMAD-METHOD setup"
```

## 🚨 常见问题排查

### Node.js版本问题
**问题**：`npx bmad-method install` 报错说Node.js版本太低
**解决**：
```bash
# 检查版本
node --version

# 如果版本 < v20.0.0，需要升级Node.js
# 重新从官网下载最新版本安装
```

### 权限问题
**问题**：安装时提示权限错误
**解决**：
```bash
# macOS/Linux
sudo npx bmad-method install

# Windows：以管理员身份运行PowerShell
```

### 网络问题
**问题**：下载缓慢或失败
**解决**：
```bash
# 使用淘宝npm镜像
npm config set registry https://registry.npmmirror.com
npx bmad-method install
```

### Web UI代理无响应
**问题**：输入`*help`没有响应
**解决**：
1. 确认团队文件内容完整复制
2. 检查系统指令是否正确设置
3. 尝试重新创建Gem/Project/GPT

## 📋 环境检查清单

在继续下一章前，请确认以下所有项目：

### 本地环境
- [ ] Node.js v20+ 已安装
- [ ] 项目目录已创建
- [ ] BMAD-METHOD 已成功安装
- [ ] `.bmad-core/` 目录结构完整
- [ ] `docs/` 目录已创建

### Web UI代理
- [ ] 选择了AI平台（Gemini/Claude/ChatGPT）
- [ ] 团队文件已正确配置
- [ ] `*help` 命令正常工作
- [ ] `*bmad-orchestrator` 可以响应

### 可选配置
- [ ] 技术偏好文件已设置
- [ ] Git 仓库已初始化
- [ ] `.gitignore` 文件已创建

## 🎉 完成确认

如果所有检查项都完成，恭喜你！环境搭建成功。

### 保存配置信息
在你的笔记中记录：
- 使用的AI平台：_______
- 项目目录路径：_______
- 遇到的问题和解决方案：_______

## ✅ 完成标记

学完本章后，请在主README.md中勾选：
- [ ] 02-环境搭建 - 完成开发环境配置

## 🚀 下一步

环境搭建完成后，让我们了解即将构建的示例项目。

**[点击这里进入 03-示例项目介绍.md →](03-示例项目介绍.md)**

---

*💡 提示：如果在环境搭建过程中遇到问题，不要担心！记录下错误信息，可以稍后询问具体的解决方案。大部分问题都有标准的解决方法。*